# ç»Ÿä¸€æ ¡éªŒå¼•æ“ï¼ˆQuality Gateï¼‰â€” ä¿®æ”¹æ–¹æ¡ˆ

## èƒŒæ™¯

### é—®é¢˜å‘ç°

åœ¨æ‰§è¡Œ `/brainstorm æ±‚èŒä¸­å¿ƒ` æ—¶ï¼Œbrainstorming Skill å†…ç½®çš„é¢†åŸŸä¸“é¡¹æ ¡éªŒï¼ˆæ­£å‘5é¡¹ + åå‘6é¡¹ + PRDè¦†ç›–ç‡ï¼‰åªå‘ç°äº† 2 ä¸ªé—®é¢˜ã€‚ä½†éšåè¡¥åšçš„å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼ˆA~I ç»´åº¦ï¼‰åˆå‘ç°äº† 8 ä¸ªé—®é¢˜ï¼š

| è½®æ¬¡ | ç»´åº¦ | å‘ç°çš„é—®é¢˜ |
|------|------|-----------|
| 1 | A ç»“æ„æ­£ç¡®æ€§ | REQ-018 ä¼˜å…ˆçº§åº”ä¸º P1ï¼ˆå®‰å…¨ç›¸å…³ï¼‰ |
| 2 | B è¾¹ç•Œåœºæ™¯ | ç¼ºå°‘ 5 ä¸ªè¾¹ç•Œåœºæ™¯éœ€æ±‚ï¼ˆREQ-025~029ï¼‰ |
| 3 | H äº¤å‰å½±å“ | REQ-008 éªŒæ”¶æ ‡å‡†éœ€å¼•ç”¨ REQ-028 |
| 4 | C æ•°æ®æµ | ç¼ºå°‘å­¦å‘˜-å¯¼å¸ˆå…³è”æ•°æ®æ¥æºï¼ˆREQ-030ï¼‰ |
| 6 | E å®‰å…¨æ€§ | ç¼ºå°‘è¾“å…¥æ¶ˆæ¯’éœ€æ±‚ï¼ˆNFR-005ï¼‰ |

### æ ¸å¿ƒæ´å¯Ÿ

- **é¢†åŸŸä¸“é¡¹æ ¡éªŒ**ï¼ˆæ­£å‘/åå‘/INVESTç­‰ï¼‰åªèƒ½å‘ç°"é¢†åŸŸå†…"çš„é—®é¢˜
- **å¤šç»´åº¦æ—‹è½¬æ ¡éªŒ**èƒ½å‘ç°"è·¨é¢†åŸŸ"çš„é—®é¢˜ï¼ˆè¾¹ç•Œåœºæ™¯ã€æ•°æ®æµã€å®‰å…¨ã€äº¤å‰å½±å“ç­‰ï¼‰
- ä¸¤è€…äº’è¡¥ï¼Œç¼ºä¸€ä¸å¯
- å½“å‰åªæœ‰ `implement-fix-plan` æœ‰å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼Œå…¶ä»– 5 ä¸ªç¯èŠ‚éƒ½ç¼ºå¤±

### å½“å‰å„ç¯èŠ‚æ ¡éªŒä½“ç³»

| ç¯èŠ‚ã€€ã€€ã€€ã€€ã€€ã€€ã€€ | é¢†åŸŸä¸“é¡¹æ ¡éªŒï¼ˆPhase 2ï¼‰ã€€ã€€ã€€ | å…¨å±€ç»ˆå®¡ï¼ˆPhase 3ï¼‰ã€€ | å¤šç»´åº¦æ—‹è½¬ |
| --------------------| -------------------------------| -----------------------| ------------|
| brainstormingã€€ã€€ã€€| æ­£å‘5é¡¹ + åå‘6é¡¹ + PRDè¦†ç›–ç‡ | ä¸‰ç»´åº¦ç»ˆå®¡ Ã— max 3 è½® | âŒ æ— ã€€ã€€ã€€ |
| story-splitterã€€ã€€ | INVESTæ ¡éªŒ + FRè¦†ç›–ç‡ã€€ã€€ã€€ã€€ | ä¸‰ç»´åº¦ç»ˆå®¡ Ã— max 3 è½® | âŒ æ— ã€€ã€€ã€€ |
| ticket-splitterã€€ã€€| è´¨é‡6é¡¹ + ACè¦†ç›–ç‡ã€€ã€€ã€€ã€€ã€€ã€€| ä¸‰ç»´åº¦ç»ˆå®¡ Ã— max 3 è½® | âŒ æ— ã€€ã€€ã€€ |
| deliver-ticketã€€ã€€ | è‡ªæˆ‘å®¡æŸ¥ + æµ‹è¯•ã€€ã€€ã€€ã€€ã€€ã€€ã€€ | ä¸‰ç»´åº¦ç»ˆå®¡ Ã— max 3 è½® | âŒ æ— ã€€ã€€ã€€ |
| verificationã€€ã€€ã€€ | å‰ç½®æ£€æŸ¥ + åŠŸèƒ½éªŒæ”¶ã€€ã€€ã€€ã€€ã€€ | ä¸‰ç»´åº¦ç»ˆå®¡ Ã— max 5 è½® | âŒ æ— ã€€ã€€ã€€ |
| implement-fix-plan | é€é¡¹æ ¡éªŒã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€| ä¸‰ç»´åº¦ç»ˆå®¡ã€€ã€€ã€€ã€€ã€€ã€€| âœ… A~I ç»´åº¦ |

---

## è®¾è®¡æ–¹æ¡ˆ

### æ ¸å¿ƒå†³ç­–

1. **ç‹¬ç«‹ Skill**ï¼šåˆ›å»º `quality-gate/SKILL.md` å®šä¹‰é€šç”¨æ ¡éªŒå¼•æ“
2. **å¢å¼ºè€Œéæ–°å¢**ï¼šä¸æ–°å¢ Phaseï¼Œè€Œæ˜¯å¢å¼ºç°æœ‰ Phase 3 å…¨å±€ç»ˆå®¡
3. **åˆå¹¶å¾ªç¯**ï¼šä¸‰ç»´åº¦ç»ˆå®¡ + å¤šç»´åº¦æ—‹è½¬æ ¡éªŒåˆå¹¶ä¸ºä¸€ä¸ªå¾ªç¯
4. **å„ç¯èŠ‚å®šåˆ¶**ï¼šæ¯ä¸ªç¯èŠ‚å®šä¹‰è‡ªå·±çš„ç»´åº¦ä¼˜å…ˆçº§å’Œå«ä¹‰æ˜ å°„
5. **ç»Ÿä¸€é€€å‡ºæ¡ä»¶**ï¼šè¿ç»­ä¸¤è½®æ— ä¿®æ”¹æ‰é€šè¿‡ï¼Œmax_rounds = 10

### æ¶æ„

```
å„ç¯èŠ‚çš„æ ¡éªŒæµç¨‹ = é¢†åŸŸä¸“é¡¹æ ¡éªŒï¼ˆPhase 2ï¼‰+ å¢å¼ºå…¨å±€ç»ˆå®¡ï¼ˆPhase 3ï¼‰

Phase 2: é¢†åŸŸä¸“é¡¹æ ¡éªŒï¼ˆå„ç¯èŠ‚è‡ªå®šä¹‰ï¼Œä¸å˜ï¼‰
  â”œâ”€â”€ brainstorming: æ­£å‘5é¡¹ + åå‘6é¡¹ + PRDè¦†ç›–ç‡
  â”œâ”€â”€ story-splitter: INVESTæ ¡éªŒ + FRè¦†ç›–ç‡
  â”œâ”€â”€ ticket-splitter: è´¨é‡6é¡¹ + ACè¦†ç›–ç‡
  â”œâ”€â”€ deliver-ticket: è‡ªæˆ‘å®¡æŸ¥ + å•å…ƒ/å›å½’æµ‹è¯•
  â””â”€â”€ verification: å‰ç½®æ£€æŸ¥ + åŠŸèƒ½éªŒæ”¶

Phase 3: å¢å¼ºå…¨å±€ç»ˆå®¡ï¼ˆç»Ÿä¸€å¼•æ“ï¼‰
  = ä¸‰ç»´åº¦ç»ˆå®¡ï¼ˆåŸæœ‰ï¼‰+ å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼ˆæ–°å¢ï¼‰
  é€€å‡ºæ¡ä»¶ï¼šè¿ç»­ä¸¤è½®æ— ä¿®æ”¹
  ä¸Šé™ï¼šmax 10 è½®
```

### ä¸‰å±‚æ ¡éªŒçš„å…³ç³»

```
é¢†åŸŸä¸“é¡¹æ ¡éªŒ â†’ å¤šç»´åº¦æ—‹è½¬æ ¡éªŒ â†’ ä¸‰ç»´åº¦ç»ˆå®¡
     â†‘                â†‘              â†‘
  "åšå¯¹äº†å—"     "åšå…¨äº†å—"     "åšå¥½äº†å—"
```

### 9 ä¸ªæ ¡éªŒç»´åº¦

| ç»´åº¦ | å…³æ³¨ç‚¹ | ç¤ºä¾‹é—®é¢˜ |
|------|--------|----------|
| **A ç»“æ„æ­£ç¡®æ€§** | ç¼–å·ã€æ ¼å¼ã€å‘½å | ç¼–å·æ˜¯å¦è¿ç»­ï¼Ÿæ ¼å¼æ˜¯å¦ç»Ÿä¸€ï¼Ÿ |
| **B è¾¹ç•Œåœºæ™¯** | ç©ºå€¼ã€æç«¯æƒ…å†µã€å¼‚å¸¸è¾“å…¥ | å¦‚æœåˆ—è¡¨ä¸ºç©ºä¼šæ€æ ·ï¼Ÿ |
| **C æ•°æ®æµ** | å­—æ®µå®šä¹‰ã€å‚æ•°ä¼ é€’ã€çŠ¶æ€ä¸€è‡´ | å†™å…¥çš„å­—æ®µå’Œè¯»å–çš„å­—æ®µæ˜¯å¦ä¸€è‡´ï¼Ÿ |
| **D å…¼å®¹æ€§** | ä¸å·²æœ‰ç»„ä»¶/æ¨¡å—çš„äº¤äº’ | æ–°å¢å†…å®¹æ˜¯å¦ä¸å·²æœ‰ç³»ç»Ÿå…¼å®¹ï¼Ÿ |
| **E å®‰å…¨æ€§** | æƒé™ã€è¾“å…¥æ ¡éªŒã€é˜²å¾¡æ€§ç¼–ç¨‹ | æ˜¯å¦æœ‰æƒé™è¶Šæƒé£é™©ï¼Ÿ |
| **F å¯ç»´æŠ¤æ€§** | ç²’åº¦ã€èŒè´£ã€å‘½åã€å¯è¯»æ€§ | æ˜¯å¦è¿‡å¤§éœ€è¦æ‹†åˆ†ï¼Ÿ |
| **G è¯­ä¹‰å‡†ç¡®æ€§** | æè¿°ä¸æ„å›¾æ˜¯å¦åŒ¹é… | éªŒæ”¶æ ‡å‡†æ˜¯å¦å‡†ç¡®åæ˜ éœ€æ±‚ï¼Ÿ |
| **H äº¤å‰å½±å“** | ä¿®æ”¹é¡¹ä¹‹é—´çš„å…³è” | æ–°å¢é¡¹æ˜¯å¦å½±å“å·²æœ‰é¡¹ï¼Ÿ |
| **I å›å½’é£é™©** | æ˜¯å¦ç ´åå·²æœ‰åŠŸèƒ½ | ç°æœ‰æµ‹è¯•æ˜¯å¦ä»ç„¶é€šè¿‡ï¼Ÿ |

### å„ç¯èŠ‚ç»´åº¦ä¼˜å…ˆçº§

| ç¯èŠ‚ | ä¼˜å…ˆç»´åº¦ï¼ˆå‰4ä¸ªï¼‰ | æ¬¡è¦ç»´åº¦ | å¯é€‰ç»´åº¦ |
|------|------------------|---------|---------|
| brainstorming | Bè¾¹ç•Œ â†’ Cæ•°æ®æµ â†’ Eå®‰å…¨ â†’ Häº¤å‰ | Aç»“æ„ â†’ Då…¼å®¹ â†’ Gè¯­ä¹‰ | Få¯ç»´æŠ¤ â†’ Iå›å½’ |
| story-splitter | Aç»“æ„ â†’ Gè¯­ä¹‰ â†’ Häº¤å‰ â†’ Cæ•°æ®æµ | Bè¾¹ç•Œ â†’ Då…¼å®¹ â†’ Få¯ç»´æŠ¤ | Eå®‰å…¨ â†’ Iå›å½’ |
| ticket-splitter | Cæ•°æ®æµ â†’ Häº¤å‰ â†’ Bè¾¹ç•Œ â†’ Då…¼å®¹ | Aç»“æ„ â†’ Gè¯­ä¹‰ â†’ Få¯ç»´æŠ¤ | Eå®‰å…¨ â†’ Iå›å½’ |
| deliver-ticket | Eå®‰å…¨ â†’ Iå›å½’ â†’ Häº¤å‰ â†’ Bè¾¹ç•Œ | Cæ•°æ®æµ â†’ Då…¼å®¹ â†’ Gè¯­ä¹‰ | Aç»“æ„ â†’ Få¯ç»´æŠ¤ |
| verification | Iå›å½’ â†’ Häº¤å‰ â†’ Cæ•°æ®æµ â†’ Då…¼å®¹ | Bè¾¹ç•Œ â†’ Eå®‰å…¨ â†’ Gè¯­ä¹‰ | Aç»“æ„ â†’ Få¯ç»´æŠ¤ |

### å„ç¯èŠ‚ç»´åº¦å«ä¹‰æ˜ å°„

| ç»´åº¦ | brainstorming | story-splitter | ticket-splitter | deliver-ticket | verification |
|------|--------------|----------------|-----------------|----------------|-------------|
| **A ç»“æ„** | REQç¼–å·è¿ç»­ã€æ ¼å¼ | Storyç¼–å·ã€ACæ ¼å¼ | Ticketç¼–å·ã€ä¾èµ–é“¾ | ä»£ç ç»“æ„ã€å‘½å | æµ‹è¯•ç»“æ„ |
| **B è¾¹ç•Œ** | ç©ºå€¼/æç«¯åœºæ™¯ | Storyè¿‡å¤§/è¿‡å° | Ticketç²’åº¦ | è¾¹ç•Œè¾“å…¥/ç©ºå€¼ | è¾¹ç•Œæµ‹è¯•è¦†ç›– |
| **C æ•°æ®æµ** | å­—æ®µå®šä¹‰ä¸€è‡´æ€§ | Storyé—´æ•°æ®ä¾èµ– | Ticketé—´æ•°æ®ä¼ é€’ | APIå‚æ•°/è¿”å›å€¼ | æ•°æ®ä¸€è‡´æ€§ |
| **D å…¼å®¹** | ä¸å·²æœ‰æ¨¡å—äº¤äº’ | ä¸å·²æœ‰Storiesäº¤äº’ | ä¸å·²æœ‰Ticketsäº¤äº’ | ä¸å·²æœ‰ä»£ç å…¼å®¹ | ä¸å·²æœ‰åŠŸèƒ½å…¼å®¹ |
| **E å®‰å…¨** | æƒé™/è¾“å…¥æ ¡éªŒ | å®‰å…¨ç›¸å…³AC | å®‰å…¨ç›¸å…³Ticket | å®‰å…¨ç¼–ç  | å®‰å…¨æµ‹è¯• |
| **F å¯ç»´æŠ¤** | éœ€æ±‚ç²’åº¦/å‘½å | Storyå¤§å°/èŒè´£ | Ticketå¤§å°/èŒè´£ | ä»£ç å¯è¯»æ€§ | æµ‹è¯•å¯ç»´æŠ¤æ€§ |
| **G è¯­ä¹‰** | æè¿°ä¸æ„å›¾åŒ¹é… | ACä¸éœ€æ±‚åŒ¹é… | Ticketä¸ACåŒ¹é… | ä»£ç ä¸TicketåŒ¹é… | æµ‹è¯•ä¸ACåŒ¹é… |
| **H äº¤å‰** | REQé—´å…³è” | Storyé—´å…³è” | Ticketé—´å…³è” | ä¿®æ”¹é—´å…³è” | åŠŸèƒ½é—´å…³è” |
| **I å›å½’** | ä¸å·²æœ‰éœ€æ±‚å†²çª | ä¸å·²æœ‰Storieså†²çª | ä¸å·²æœ‰Ticketså†²çª | ç ´åå·²æœ‰åŠŸèƒ½ | å›å½’æµ‹è¯• |

### å¢å¼ºå…¨å±€ç»ˆå®¡ä¼ªä»£ç 

```python
def enhanced_global_review(artifact, artifact_type, context):
    """
    å¢å¼ºç‰ˆå…¨å±€ç»ˆå®¡ = ä¸‰ç»´åº¦ç»ˆå®¡ + å¤šç»´åº¦æ—‹è½¬æ ¡éªŒ
    æ›¿æ¢å„ Skill åŸæœ‰çš„ Phase 3
    
    å‚æ•°:
      artifact: å¾…æ ¡éªŒçš„äº§ç‰©ï¼ˆéœ€æ±‚æ–‡æ¡£/Stories/Tickets/ä»£ç å˜æ›´/æµ‹è¯•æŠ¥å‘Šï¼‰
      artifact_type: "brainstorm" | "story" | "ticket" | "code" | "verification"
      context: ä¸Šä¸‹æ–‡ï¼ˆPRDã€å·²æœ‰ä»£ç ã€configç­‰ï¼‰
    """
    dim_priority = DIMENSION_PRIORITY[artifact_type]  # ä» quality-gate SKILL.md è·å–
    dim_meanings = DIMENSION_MEANINGS[artifact_type]   # å„ç»´åº¦åœ¨è¯¥ç¯èŠ‚çš„å…·ä½“å«ä¹‰
    
    max_rounds = 10
    no_change_rounds = 0
    dim_index = 0
    last_had_changes = False
    
    for round_num in range(1, max_rounds + 1):
        all_issues = []
        
        # === 3a. ä¸‰ç»´åº¦ç»ˆå®¡ï¼ˆæ¯è½®éƒ½åšï¼‰ ===
        all_issues += check_upstream_consistency(artifact, context)
        all_issues += check_downstream_feasibility(artifact, context)
        all_issues += check_global_integrity(artifact, context)
        
        # === 3b. å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼ˆæ¯è½®é€‰ä¸€ä¸ªç»´åº¦ï¼‰ ===
        if last_had_changes:
            dim = "H"  # ä¸Šè½®æœ‰ä¿®æ”¹ï¼Œä¼˜å…ˆäº¤å‰å½±å“
        else:
            dim = dim_priority[dim_index % len(dim_priority)]
            dim_index += 1
        
        dim_issues = check_dimension(artifact, dim, dim_meanings[dim])
        all_issues += dim_issues
        
        # === è¾“å‡ºè¿›åº¦ ===
        print(f"  ğŸ” ç»ˆå®¡è½®æ¬¡ {round_num}/{max_rounds} (ç»´åº¦ {dim})")
        
        # === åˆ¤æ–­ ===
        if all_issues:
            print(f"    âŒ {len(all_issues)} ä¸ªé—®é¢˜")
            for issue in all_issues:
                print(f"      - {issue}")
            artifact = fix_issues(artifact, all_issues)
            no_change_rounds = 0
            last_had_changes = True
        else:
            print(f"    âœ… æ— é—®é¢˜")
            no_change_rounds += 1
            last_had_changes = False
            if no_change_rounds >= 2:
                print(f"  ğŸ‰ è¿ç»­ {no_change_rounds} è½®æ— ä¿®æ”¹ï¼Œç»ˆå®¡é€šè¿‡")
                break
    else:
        raise QualityGateFailure(
            f"å¢å¼ºç»ˆå®¡ç»è¿‡ {max_rounds} è½®ä»æœªé€šè¿‡ï¼Œè¯·äººå·¥ä»‹å…¥"
        )
    
    return artifact
```

---

## ä¿®æ”¹é¡¹æ¸…å•

### ä¿®æ”¹é¡¹ #1 â€” æ–°å»º quality-gate/SKILL.md

- **æ–‡ä»¶**ï¼š`.claude/skills/quality-gate/SKILL.md`ï¼ˆæ–°å»ºï¼‰
- **ä¼˜å…ˆçº§**ï¼šğŸ”´é«˜ï¼ˆå…¶ä»–ä¿®æ”¹ä¾èµ–æ­¤æ–‡ä»¶ï¼‰
- **å†…å®¹**ï¼š
  - Skill å…ƒæ•°æ®ï¼ˆname, description, metadataï¼‰
  - 9 ä¸ªç»´åº¦å®šä¹‰è¡¨
  - å„ç¯èŠ‚ç»´åº¦ä¼˜å…ˆçº§æ’åºè¡¨
  - å„ç¯èŠ‚ç»´åº¦å«ä¹‰æ˜ å°„è¡¨
  - `enhanced_global_review()` å®Œæ•´ä¼ªä»£ç 
  - è¿›åº¦è¾“å‡ºæ ¼å¼
  - ç¡¬çº¦æŸå’Œå¤±è´¥é€€å‡ºè§„åˆ™

### ä¿®æ”¹é¡¹ #2 â€” brainstorming/SKILL.md Phase 3 å¢å¼º

- **æ–‡ä»¶**ï¼š`.claude/skills/brainstorming/SKILL.md`
- **ä¼˜å…ˆçº§**ï¼šğŸ”´é«˜
- **å…·ä½“ä¿®æ”¹**ï¼š
  1. **å»æ‰å¤–å±‚å¾ªç¯** `max_global_retries = 3` å’Œ `for global_retry` â€” Phase 2 å’Œ Phase 3 å„è‡ªç‹¬ç«‹å¾ªç¯
  2. Phase 2 ä¿æŒ `max_iterations = 10`ï¼Œç‹¬ç«‹å¾ªç¯
  3. Phase 3 æ›¿æ¢ä¸ºå¢å¼ºå…¨å±€ç»ˆå®¡ï¼Œ`max_enhanced_rounds = 10`
  4. é€€å‡ºæ¡ä»¶ï¼šè¿ç»­ä¸¤è½®æ— ä¿®æ”¹æ‰ break
  5. ç»´åº¦ä¼˜å…ˆçº§ï¼šB â†’ C â†’ E â†’ H â†’ A â†’ D â†’ G â†’ F â†’ I
  6. æ›´æ–°æµç¨‹å›¾ï¼ˆå»æ‰å›é€€ç®­å¤´ï¼ŒPhase 2/3 ç‹¬ç«‹ï¼‰
  7. æ›´æ–°ç¡¬çº¦æŸèŠ‚ã€å¤±è´¥é€€å‡ºè§„åˆ™ã€è¿­ä»£è®¡æ•°æ ¼å¼
- **å½±å“**ï¼š
  - ä¼ªä»£ç ç¼©è¿›å‡å°‘ä¸€çº§ï¼ˆä¸å†åµŒå¥—åœ¨å¤–å±‚å¾ªç¯å†…ï¼‰
  - ç¡¬çº¦æŸèŠ‚éœ€æ›´æ–°è¿­ä»£ä¸Šé™æè¿°
  - è¿­ä»£è®¡æ•°å¼ºåˆ¶è§„åˆ™éœ€æ›´æ–°æ ¼å¼
- **çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ

### ä¿®æ”¹é¡¹ #3 â€” story-splitter/SKILL.md Phase 3 å¢å¼º

- **æ–‡ä»¶**ï¼š`.claude/skills/story-splitter/SKILL.md`
- **ä¼˜å…ˆçº§**ï¼šğŸ”´é«˜
- **å…·ä½“ä¿®æ”¹**ï¼š
  1. **å»æ‰å¤–å±‚å¾ªç¯** `max_global_retries = 3` å’Œ `for global_retry` â€” Phase 2 å’Œ Phase 3 å„è‡ªç‹¬ç«‹å¾ªç¯
  2. Phase 2 ä¿æŒ `max_iterations = 5`ï¼Œç‹¬ç«‹å¾ªç¯
  3. Phase 3 æ›¿æ¢ä¸ºå¢å¼ºå…¨å±€ç»ˆå®¡ï¼Œ`max_enhanced_rounds = 10`
  4. ç»´åº¦ä¼˜å…ˆçº§ï¼šA â†’ G â†’ H â†’ C â†’ B â†’ D â†’ F â†’ E â†’ I
  5. ä¸‰ç»´åº¦æ£€æŸ¥ï¼šä¸Šæ¸¸=FR 100%è¦†ç›–ã€ä¸‹æ¸¸=æ¯ä¸ªStoryæœ‰ACä¸”â‰¤5å¤©ã€å…¨å±€=Storiesæ— é‡å 
  6. æ›´æ–°æµç¨‹å›¾ï¼ˆåŠ å…¥ Phase 3 å¢å¼ºç»ˆå®¡ï¼‰
  7. æ›´æ–°ç¡¬çº¦æŸèŠ‚
- **å½±å“**ï¼šåŒ #2

### ä¿®æ”¹é¡¹ #4 â€” ticket-splitter/SKILL.md Phase 3 å¢å¼º

- **æ–‡ä»¶**ï¼š`.claude/skills/ticket-splitter/SKILL.md`
- **ä¼˜å…ˆçº§**ï¼šğŸ”´é«˜
- **å…·ä½“ä¿®æ”¹**ï¼š
  1. **å»æ‰å¤–å±‚å¾ªç¯** `max_global_retries = 3` å’Œ `for global_retry` â€” Phase 2 å’Œ Phase 3 å„è‡ªç‹¬ç«‹å¾ªç¯
  2. Phase 2 ä¿æŒ `max_iterations = 5`ï¼Œç‹¬ç«‹å¾ªç¯
  3. Phase 3 æ›¿æ¢ä¸ºå¢å¼ºå…¨å±€ç»ˆå®¡ï¼Œ`max_enhanced_rounds = 10`
  4. ç»´åº¦ä¼˜å…ˆçº§ï¼šC â†’ H â†’ B â†’ D â†’ A â†’ G â†’ F â†’ E â†’ I
  5. ä¸‰ç»´åº¦æ£€æŸ¥ï¼šä¸Šæ¸¸=Story AC 100%è¦†ç›–ã€ä¸‹æ¸¸=æ¯ä¸ªTicketå¯ç‹¬ç«‹æ‰§è¡Œã€å…¨å±€=ä¾èµ–æ— ç¯+allowed_pathsæ— å†²çª
  6. æ›´æ–°æµç¨‹å›¾ï¼ˆåŠ å…¥ Phase 3 å¢å¼ºç»ˆå®¡ï¼‰
  7. æ›´æ–°ç¡¬çº¦æŸèŠ‚ã€å¤±è´¥é€€å‡ºè§„åˆ™ã€è¿­ä»£è®¡æ•°æ ¼å¼
- **å½±å“**ï¼šåŒ #2

### ä¿®æ”¹é¡¹ #5 â€” deliver-ticket/SKILL.md Step 4.5 å¢å¼º

- **æ–‡ä»¶**ï¼š`.claude/skills/deliver-ticket/SKILL.md`
- **ä¼˜å…ˆçº§**ï¼šğŸ”´é«˜
- **ç»“æ„åˆ†æ**ï¼šdeliver-ticket çš„å¾ªç¯ç»“æ„ä¸å…¶ä»– Skill ä¸åŒï¼š
  - æ— å¤–å±‚ Phase 2+3 å¾ªç¯ï¼ˆPhase 2 æ˜¯ä»£ç å®ç°ï¼Œä¸æ˜¯æ ¡éªŒå¾ªç¯ï¼‰
  - Step 4 + Step 4.5 åŒ…è£¹åœ¨ `max_review_retries = 2` çš„ review å¾ªç¯ä¸­
  - review å¾ªç¯åŒ…å«ï¼šè‡ªæˆ‘å®¡æŸ¥ + å…¨å±€ç»ˆå®¡
  - å› æ­¤åªéœ€å¢å¼º Step 4.5 çš„å…¨å±€ç»ˆå®¡éƒ¨åˆ†ï¼Œ**ä¿ç•™ review å¾ªç¯ç»“æ„**
- **å…·ä½“ä¿®æ”¹**ï¼š
  1. å°† `max_review_retries = 2` æ”¹ä¸º `max_review_retries = 9`ï¼ˆæ€»å…± 10 è½®ï¼‰
  2. Step 4.5 å…¨å±€ç»ˆå®¡å†…éƒ¨æ›¿æ¢ä¸ºå¢å¼ºé€»è¾‘ï¼ˆä¸‰ç»´åº¦ + å¤šç»´åº¦æ—‹è½¬ï¼‰
  3. ç»´åº¦ä¼˜å…ˆçº§ï¼šE â†’ I â†’ H â†’ B â†’ C â†’ D â†’ G â†’ A â†’ F
  4. ä¸‰ç»´åº¦æ£€æŸ¥ï¼šä¸Šæ¸¸=Ticket ACå…¨æ»¡è¶³ã€ä¸‹æ¸¸=å…¨é‡æµ‹è¯•é€šè¿‡ã€å…¨å±€=ä¿®æ”¹åœ¨allowed_pathså†…
  5. é€€å‡ºæ¡ä»¶ï¼šè¿ç»­ä¸¤è½®æ— ä¿®æ”¹
  6. æ›´æ–°å¤±è´¥é€€å‡ºæè¿°
- **å½±å“**ï¼š
  - review å¾ªç¯ä» max 3 è½®å˜ä¸º max 10 è½®
  - å¤±è´¥é€€å‡ºæè¿°éœ€æ›´æ–°

### ä¿®æ”¹é¡¹ #6 â€” verification/SKILL.md Phase 3 å¢å¼º

- **æ–‡ä»¶**ï¼š`.claude/skills/verification/SKILL.md`
- **ä¼˜å…ˆçº§**ï¼šğŸ”´é«˜
- **ä¿®æ”¹èŒƒå›´**ï¼šç¬¬174-288è¡Œï¼ˆPhase 2 + Phase 3 å¾ªç¯ï¼‰
- **å…·ä½“ä¿®æ”¹**ï¼š
  1. Phase 2 å’Œ Phase 3 åˆ†ç¦»ä¸ºä¸¤ä¸ªç‹¬ç«‹å¾ªç¯
  2. Phase 2 ä¿æŒ `max_iterations = 5`
  3. Phase 3 æ›¿æ¢ä¸º `enhanced_global_review()` è°ƒç”¨ï¼Œ`max_enhanced_rounds = 10`
  4. ç»´åº¦ä¼˜å…ˆçº§ï¼šI â†’ H â†’ C â†’ D â†’ B â†’ E â†’ G â†’ A â†’ F
- **å½±å“**ï¼š
  - å¾ªç¯ç»“æ„å˜åŒ–è¾ƒå¤§ï¼ˆä»åˆå¹¶å¾ªç¯å˜ä¸ºåˆ†ç¦»å¾ªç¯ï¼‰
  - å¤±è´¥é€€å‡ºè§„åˆ™éœ€åˆ†åˆ«æè¿° Phase 2 å’Œ Phase 3

### ä¿®æ”¹é¡¹ #7 â€” brainstorm.md Workflow æ›´æ–°

- **æ–‡ä»¶**ï¼š`.windsurf/workflows/brainstorm.md`
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ä¸­
- **ä¿®æ”¹èŒƒå›´**ï¼šæ­¥éª¤3 ç¬¬27è¡Œ
- **å…·ä½“ä¿®æ”¹**ï¼š
  - åŸæ–‡ï¼š`è¯¥ skill ä¼šè‡ªåŠ¨è¿›è¡Œå¤šè½®æ­£å‘/åå‘/PRDè¦†ç›–ç‡æ ¡éªŒ + å…¨å±€ç»ˆå®¡`
  - æ”¹ä¸ºï¼š`è¯¥ skill ä¼šè‡ªåŠ¨è¿›è¡Œå¤šè½®æ­£å‘/åå‘/PRDè¦†ç›–ç‡æ ¡éªŒï¼ˆPhase 2ï¼‰+ å¢å¼ºå…¨å±€ç»ˆå®¡ï¼ˆPhase 3ï¼šä¸‰ç»´åº¦ç»ˆå®¡ + A~I å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼Œå‚è§ quality-gate/SKILL.mdï¼‰`

### ä¿®æ”¹é¡¹ #8 â€” split-story.md Workflow æ›´æ–°

- **æ–‡ä»¶**ï¼š`.windsurf/workflows/split-story.md`
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ä¸­
- **ä¿®æ”¹èŒƒå›´**ï¼šæ­¥éª¤2 ç¬¬22è¡Œ
- **å…·ä½“ä¿®æ”¹**ï¼š
  - åŸæ–‡ï¼š`è¯¥ skill ä¼šè‡ªåŠ¨è¿›è¡Œå¤šè½® INVEST/FRè¦†ç›–ç‡æ ¡éªŒ + å…¨å±€ç»ˆå®¡`
  - æ”¹ä¸ºï¼š`è¯¥ skill ä¼šè‡ªåŠ¨è¿›è¡Œå¤šè½® INVEST/FRè¦†ç›–ç‡æ ¡éªŒï¼ˆPhase 2ï¼‰+ å¢å¼ºå…¨å±€ç»ˆå®¡ï¼ˆPhase 3ï¼šä¸‰ç»´åº¦ç»ˆå®¡ + A~I å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼Œå‚è§ quality-gate/SKILL.mdï¼‰`

### ä¿®æ”¹é¡¹ #9 â€” split-ticket.md Workflow æ›´æ–°

- **æ–‡ä»¶**ï¼š`.windsurf/workflows/split-ticket.md`
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ä¸­
- **ä¿®æ”¹èŒƒå›´**ï¼šæ­¥éª¤2 ç¬¬28è¡Œ
- **å…·ä½“ä¿®æ”¹**ï¼š
  - åŸæ–‡ï¼š`è¯¥ skill ä¼šè‡ªåŠ¨è¿›è¡Œå¤šè½®è´¨é‡/è¦†ç›–ç‡æ ¡éªŒ + å…¨å±€ç»ˆå®¡`
  - æ”¹ä¸ºï¼š`è¯¥ skill ä¼šè‡ªåŠ¨è¿›è¡Œå¤šè½®è´¨é‡/è¦†ç›–ç‡æ ¡éªŒï¼ˆPhase 2ï¼‰+ å¢å¼ºå…¨å±€ç»ˆå®¡ï¼ˆPhase 3ï¼šä¸‰ç»´åº¦ç»ˆå®¡ + A~I å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼Œå‚è§ quality-gate/SKILL.mdï¼‰`

### ä¿®æ”¹é¡¹ #10 â€” next.md Workflow æ›´æ–°

- **æ–‡ä»¶**ï¼š`.windsurf/workflows/next.md`ï¼ˆå¯¹åº” deliver-ticketï¼‰
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ä¸­
- **ä¿®æ”¹èŒƒå›´**ï¼šæ­¥éª¤4 ç¬¬28è¡Œ
- **å…·ä½“ä¿®æ”¹**ï¼š
  - åŸæ–‡ï¼š`**è‡ªæˆ‘å®¡æŸ¥ + å…¨å±€ç»ˆå®¡**ï¼ˆé‡è¯•å¾ªç¯ï¼Œæœ€å¤š 3 æ¬¡ï¼‰`
  - æ”¹ä¸ºï¼š`**è‡ªæˆ‘å®¡æŸ¥ + å¢å¼ºå…¨å±€ç»ˆå®¡**ï¼ˆä¸‰ç»´åº¦ç»ˆå®¡ + A~I å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼Œé‡è¯•å¾ªç¯æœ€å¤š 10 æ¬¡ï¼Œå‚è§ quality-gate/SKILL.mdï¼‰`

### ä¿®æ”¹é¡¹ #11 â€” verify.md Workflow æ›´æ–°

- **æ–‡ä»¶**ï¼š`.windsurf/workflows/verify.md`
- **ä¼˜å…ˆçº§**ï¼šğŸŸ¡ä¸­
- **ä¿®æ”¹èŒƒå›´**ï¼šæ­¥éª¤2 ç¬¬23è¡Œ
- **å…·ä½“ä¿®æ”¹**ï¼š
  - åŸæ–‡ï¼š`Phase 3ï¼šå…¨å±€ç»ˆå®¡ï¼ˆä¸Šæ¸¸ä¸€è‡´æ€§ + ä¸‹æ¸¸å¯è¡Œæ€§ + å…¨å±€å®Œæ•´æ€§ï¼‰`
  - æ”¹ä¸ºï¼š`Phase 3ï¼šå¢å¼ºå…¨å±€ç»ˆå®¡ï¼ˆä¸‰ç»´åº¦ç»ˆå®¡ + A~I å¤šç»´åº¦æ—‹è½¬æ ¡éªŒï¼Œå‚è§ quality-gate/SKILL.mdï¼‰`

---

## æ‰§è¡Œè®¡åˆ’

| æ‰¹æ¬¡ | æ–‡ä»¶ | ä¿®æ”¹é¡¹ | ä¾èµ– |
|------|------|--------|------|
| **æ‰¹æ¬¡ 1** | quality-gate/SKILL.mdï¼ˆæ–°å»ºï¼‰ | #1 | æ—  |
| **æ‰¹æ¬¡ 2** | brainstorming/SKILL.md | #2 | æ‰¹æ¬¡1 |
| **æ‰¹æ¬¡ 3** | story-splitter/SKILL.md | #3 | æ‰¹æ¬¡1 |
| **æ‰¹æ¬¡ 4** | ticket-splitter/SKILL.md | #4 | æ‰¹æ¬¡1 |
| **æ‰¹æ¬¡ 5** | deliver-ticket/SKILL.md | #5 | æ‰¹æ¬¡1 |
| **æ‰¹æ¬¡ 6** | verification/SKILL.md | #6 | æ‰¹æ¬¡1 |
| **æ‰¹æ¬¡ 7** | 5 ä¸ª Workflow æ–‡ä»¶ | #7~11 | æ‰¹æ¬¡2~6 |

æ¯æ‰¹ä¿®æ”¹åæ‰§è¡Œ Phase 3 + Phase 4 + Phase 5 æ ¡éªŒã€‚

---

## é£é™©è¯„ä¼°

| é£é™© | ç­‰çº§ | ç¼“è§£æªæ–½ |
|------|------|---------|
| æ ¡éªŒè½®æ¬¡è¿‡å¤šå¯¼è‡´æ‰§è¡Œæ—¶é—´è¿‡é•¿ | ä¸­ | max_rounds=10 ç¡¬ä¸Šé™ï¼›å„ç¯èŠ‚å®šåˆ¶ç»´åº¦ä¼˜å…ˆçº§ |
| å„ Skill ä¼ªä»£ç ç»“æ„å·®å¼‚å¤§ | ä½ | é€ä¸ªæ–‡ä»¶åˆ†æï¼Œä¿æŒå„è‡ªé£æ ¼ |
| verification å¾ªç¯ç»“æ„å˜åŒ–å¤§ | ä¸­ | Phase 2/3 åˆ†ç¦»éœ€ä»”ç»†æµ‹è¯• |
| Workflow æ–‡ä»¶æè¿°ä¸ä¸€è‡´ | ä½ | ç»Ÿä¸€ä½¿ç”¨"å¢å¼ºå…¨å±€ç»ˆå®¡"æœ¯è¯­ |

---

## è®¾è®¡å†³ç­–è®°å½•

### å†³ç­– 1: quality-gate/SKILL.md çš„å®šä½

- **å†³ç­–**ï¼šquality-gate/SKILL.md æ˜¯**å‚è€ƒæ–‡æ¡£**ï¼Œä¸æ˜¯è¢«è¿è¡Œæ—¶è°ƒç”¨çš„ Skill
- **åŸå› **ï¼šAI æ¯æ¬¡åªæ‰§è¡Œä¸€ä¸ª Skillï¼Œä¸æ”¯æŒè·¨ Skill è°ƒç”¨
- **å®ç°**ï¼šå„ Skill åœ¨ Phase 3 ä¼ªä»£ç ä¸­å¼•ç”¨ quality-gate çš„ç»´åº¦å®šä¹‰ï¼Œå†…è”è‡ªå·±çš„ç»´åº¦ä¼˜å…ˆçº§
- **å¥½å¤„**ï¼šç»´åº¦å®šä¹‰å•ä¸€äº‹å®æ¥æºï¼ˆDRYï¼‰ï¼Œåç»­ä¿®æ”¹åªæ”¹ä¸€å¤„

### å†³ç­– 2: æ–¹æ¡ˆ Aï¼ˆç‹¬ç«‹å‚è€ƒæ–‡æ¡£ï¼‰vs æ–¹æ¡ˆ Bï¼ˆç›´æ¥å†…è”ï¼‰

- **é€‰æ‹©**ï¼šæ–¹æ¡ˆ A
- **åŸå› **ï¼šæ¶æ„æ›´æ¸…æ™°ï¼Œç»´åº¦è¡¨ä¸é‡å¤ 5 æ¬¡ï¼Œå¯æ‰©å±•æ€§å¥½

---

### å†³ç­– 3: å»æ‰å¤–å±‚å¾ªç¯

- **å†³ç­–**ï¼šbrainstorming/story-splitter/ticket-splitter å»æ‰ `max_global_retries=3` å¤–å±‚å¾ªç¯
- **åŸå› **ï¼šå¢å¼ºç»ˆå®¡å¤±è´¥ç›´æ¥ returnï¼Œå¤–å±‚å¾ªç¯æ°¸è¿œåªæ‰§è¡Œ 1 æ¬¡ï¼Œå±äºå†—ä½™ä»£ç 
- **å½±å“**ï¼šPhase 2 å’Œ Phase 3 å„è‡ªç‹¬ç«‹å¾ªç¯ï¼Œä¼ªä»£ç ç¼©è¿›å‡å°‘ä¸€çº§
- **ä¾‹å¤–**ï¼šdeliver-ticket ä¿ç•™ review å¾ªç¯ç»“æ„ï¼ˆå®ƒä¸æ˜¯å¤–å±‚ Phase 2+3 å¾ªç¯ï¼Œè€Œæ˜¯ Step 4+4.5 çš„é‡è¯•å¾ªç¯ï¼‰

---

### å†³ç­– 4: ç»Ÿä¸€å¤±è´¥å¤„ç†ä¸º return

- **å†³ç­–**ï¼šbrainstorming å’Œ ticket-splitter çš„ `raise` ç»Ÿä¸€æ”¹ä¸º `return {"status": "failed", ...}`
- **åŸå› **ï¼š5 ä¸ª Skill ä¸­ 3 ä¸ªç”¨ returnã€2 ä¸ªç”¨ raiseï¼Œé£æ ¼ä¸ä¸€è‡´
- **å½±å“**ï¼šbrainstorming 2 å¤„ã€ticket-splitter 2 å¤„ï¼Œå…± 4 å¤„ä¿®æ”¹
- **ä¾‹å¤–**ï¼šdeliver-ticket å’Œ verification çš„è¿”å›æ ¼å¼ä¿æŒä¸å˜ï¼ˆè°ƒç”¨æ–¹ä¸åŒï¼Œéœ€è¦çš„ä¿¡æ¯ä¸åŒï¼‰

---

## è¡¥å……ä¿®æ”¹é¡¹

### #12. ç»Ÿä¸€å¤±è´¥å¤„ç†æ–¹å¼ï¼ˆraise â†’ returnï¼‰

**æ–‡ä»¶ 1**ï¼š`.claude/skills/brainstorming/SKILL.md`

| ä½ç½® | old | new |
|------|-----|-----|
| Phase 2 å¤±è´¥ | `raise BrainstormFailure(f"Phase 2 ç»è¿‡ {max_iterations} è½®è¿­ä»£ä»æœªé€šè¿‡")` | `return {"status": "failed", "reason": f"Phase 2 ç»è¿‡ {max_iterations} è½®è¿­ä»£ä»æœªé€šè¿‡"}` |
| Phase 3 å¤±è´¥ | `raise BrainstormFailure(f"å¢å¼ºç»ˆå®¡ç»è¿‡ {max_enhanced_rounds} è½®ä»æœªé€šè¿‡ï¼Œè¯·äººå·¥ä»‹å…¥")` | `return {"status": "failed", "reason": f"å¢å¼ºç»ˆå®¡ç»è¿‡ {max_enhanced_rounds} è½®ä»æœªé€šè¿‡ï¼Œè¯·äººå·¥ä»‹å…¥"}` |

**æ–‡ä»¶ 2**ï¼š`.claude/skills/ticket-splitter/SKILL.md`

| ä½ç½® | old | new |
|------|-----|-----|
| Phase 2 å¤±è´¥ | `raise SplitFailure(f"Phase 2 ç»è¿‡ {max_iterations} è½®è¿­ä»£ä»æœªé€šè¿‡")` | `return {"status": "failed", "reason": f"Phase 2 ç»è¿‡ {max_iterations} è½®è¿­ä»£ä»æœªé€šè¿‡"}` |
| Phase 3 å¤±è´¥ | `raise SplitFailure(f"å¢å¼ºç»ˆå®¡ç»è¿‡ {max_enhanced_rounds} è½®ä»æœªé€šè¿‡ï¼Œè¯·äººå·¥ä»‹å…¥")` | `return {"status": "failed", "reason": f"å¢å¼ºç»ˆå®¡ç»è¿‡ {max_enhanced_rounds} è½®ä»æœªé€šè¿‡ï¼Œè¯·äººå·¥ä»‹å…¥"}` |

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.4
**åˆ›å»ºæ—¥æœŸ**ï¼š2026-02-13
**æ›´æ–°æ—¥æœŸ**ï¼š2026-02-14
**çŠ¶æ€**ï¼šâœ… å…¨éƒ¨å®Œæˆï¼ˆ7ä¸ªæ‰¹æ¬¡ + è¡¥å……ä¿®æ”¹é¡¹ #12ï¼‰
