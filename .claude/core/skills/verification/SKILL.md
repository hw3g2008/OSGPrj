# Verification Skill

---
name: verification
description: "Use when validating any output - ensures all claims are backed by evidence"
invoked_by: agent
auto_execute: true
---

## æ¦‚è§ˆ

éªŒè¯æŠ€èƒ½ï¼Œç¡®ä¿æ‰€æœ‰å£°æ˜éƒ½æœ‰è¯æ®æ”¯æ’‘ã€‚

## âš ï¸ é“å¾‹

```
è¯æ®å…ˆäºæ–­è¨€

ä»»ä½•"å®Œæˆ"å£°æ˜å¿…é¡»æœ‰ï¼š
- å‘½ä»¤è¾“å‡ºæˆªå›¾/æ—¥å¿—
- æµ‹è¯•é€šè¿‡è®°å½•
- å¯å¤ç°çš„éªŒè¯æ­¥éª¤
```

## é—¨æ§å‡½æ•°

```python
def can_claim_done(task):
    """åœ¨å£°æ˜å®Œæˆå‰å¿…é¡»é€šè¿‡æ­¤æ£€æŸ¥"""
    
    # 1. å¿…é¡»æœ‰æ‰§è¡Œè¯æ®
    if not task.execution_log:
        return False, "ç¼ºå°‘æ‰§è¡Œæ—¥å¿—"
    
    # 2. å¿…é¡»æœ‰æµ‹è¯•ç»“æœ
    if not task.test_result:
        return False, "ç¼ºå°‘æµ‹è¯•ç»“æœ"
    
    # 3. æµ‹è¯•å¿…é¡»é€šè¿‡
    if task.test_result.status != "passed":
        return False, "æµ‹è¯•æœªé€šè¿‡"
    
    # 4. æ‰€æœ‰éªŒæ”¶æ ‡å‡†å¿…é¡»æ»¡è¶³
    for criteria in task.acceptance_criteria:
        if not criteria.verified:
            return False, f"éªŒæ”¶æ ‡å‡†æœªæ»¡è¶³: {criteria}"
    
    return True, "å¯ä»¥å£°æ˜å®Œæˆ"
```

## æ ¡éªŒç»´åº¦çŸ©é˜µ

| ç»´åº¦ | æ£€æŸ¥é¡¹ | æ£€æŸ¥æ–¹æ³• |
|------|--------|----------|
| **ç»“æ„å±‚** | ç¼–å·è¿ç»­ | é€ä¸ªè®¡æ•°ï¼ŒN å¼€å§‹åˆ° N+k |
| | å¯¼èˆªå®Œæ•´ | æ‰€æœ‰é“¾æ¥å¯ç‚¹å‡» |
| | ç›®å½•åŒ¹é… | ç›®å½•ç»“æ„ä¸æ–‡ä»¶å¯¹åº” |
| **æ ¼å¼å±‚** | ID æ ¼å¼ | æ­£åˆ™ï¼š`[A-Z]+-\d{3}` |
| | æ—¶é—´æ ¼å¼ | ISO 8601 UTC |
| | è·¯å¾„æ ¼å¼ | ç›¸å¯¹è·¯å¾„ï¼Œå­˜åœ¨æ€§æ£€æŸ¥ |
| | ä»£ç å— | å¼€é—­æ ‡ç­¾åŒ¹é… |
| **è¯­ä¹‰å±‚** | æŠ€æœ¯ç‰ˆæœ¬ | ä¸ config.yaml ä¸€è‡´ |
| | é…ç½®å€¼ | ä¸å®é™…é…ç½®ä¸€è‡´ |
| | ä¸šåŠ¡æœ¯è¯­ | ä½¿ç”¨é¡¹ç›®å®šä¹‰çš„æœ¯è¯­ |
| **é€»è¾‘å±‚** | æµç¨‹å®Œæ•´ | æœ‰æ˜ç¡®çš„å¼€å§‹å’Œç»“æŸ |
| | ä¾èµ–æ­£ç¡® | ä¾èµ–é¡¹å­˜åœ¨ä¸”æ­£ç¡® |
| | è¾¹ç•Œå¤„ç† | é”™è¯¯/å¼‚å¸¸åœºæ™¯è¦†ç›– |

## å¸¸è§å¤±è´¥å¯¹ç…§è¡¨

| é™ˆè¿° | å®é™…è¯æ® | æ­£ç¡®åšæ³• |
|------|----------|----------|
| "æ„å»ºæˆåŠŸ" | æ„å»ºå‘½ä»¤: exit 0 | Linter é€šè¿‡ä¸ä»£è¡¨æ„å»ºæˆåŠŸ |
| "Bug ä¿®å¥½äº†" | æµ‹è¯•åŸç—‡çŠ¶: é€šè¿‡ | ä»£ç æ”¹äº†ä¸ä»£è¡¨ä¿®å¥½äº† |
| "æµ‹è¯•é€šè¿‡" | æµ‹è¯•æ¡†æ¶è¾“å‡º | è¿è¡Œå®é™…æµ‹è¯•å‘½ä»¤ |
| "æ–‡ä»¶å·²æ›´æ–°" | æ–‡ä»¶æ—¶é—´æˆ³ | æ£€æŸ¥å®é™…å†…å®¹ |

## ååˆç†åŒ–è¡¨æ ¼

| å€Ÿå£ | ç°å®æ£€æŸ¥ |
|------|----------|
| "åº”è¯¥å·¥ä½œäº†" | è¿è¡ŒéªŒè¯å‘½ä»¤ |
| "æˆ‘ç¡®å®šæ²¡é—®é¢˜" | ä¿¡å¿ƒ â‰  è¯æ® |
| "ä¹‹å‰æµ‹è¿‡äº†" | å†æµ‹ä¸€æ¬¡ |
| "å˜æ›´å¤ªå°" | å°å˜æ›´ä¹Ÿå¯èƒ½å¼•å…¥ bug |

## çº¢æ—— - ç«‹å³åœæ­¢

- âŒ æ²¡æœ‰è¿è¡Œä»»ä½•éªŒè¯å‘½ä»¤å°±è¯´"å®Œæˆ"
- âŒ æµ‹è¯•å¤±è´¥ä½†å£°ç§°"åº”è¯¥æ˜¯ç¯å¢ƒé—®é¢˜"
- âŒ è·³è¿‡éªŒè¯å› ä¸º"å¤ªç®€å•äº†"
- âŒ ä½¿ç”¨"æ ¹æ®æˆ‘çš„ç†è§£"è€Œéå®é™…è¯æ®

## æ‰§è¡Œä¼ªä»£ç 

```python
def verify(task):
    issues = []
    
    # ç»“æ„å±‚æ ¡éªŒ
    for check in STRUCTURE_CHECKS:
        result = check.execute(task)
        if not result.passed:
            issues.append(("structure", check.name, result.issue))
    
    # æ ¼å¼å±‚æ ¡éªŒ
    for check in FORMAT_CHECKS:
        result = check.execute(task)
        if not result.passed:
            issues.append(("format", check.name, result.issue))
    
    # è¯­ä¹‰å±‚æ ¡éªŒ
    for check in SEMANTIC_CHECKS:
        result = check.execute(task)
        if not result.passed:
            issues.append(("semantic", check.name, result.issue))
    
    # é€»è¾‘å±‚æ ¡éªŒ
    for check in LOGIC_CHECKS:
        result = check.execute(task)
        if not result.passed:
            issues.append(("logic", check.name, result.issue))
    
    if issues:
        return {"passed": False, "issues": issues}
    
    return {"passed": True}
```

## è¾“å‡ºæ ¼å¼

```markdown
## ğŸ” éªŒè¯ç»“æœ

### æ ¡éªŒç»´åº¦
| ç»´åº¦ | ç»“æœ | è¯¦æƒ… |
|------|------|------|
| ç»“æ„å±‚ | âœ… | 3/3 é€šè¿‡ |
| æ ¼å¼å±‚ | âœ… | 4/4 é€šè¿‡ |
| è¯­ä¹‰å±‚ | âœ… | 3/3 é€šè¿‡ |
| é€»è¾‘å±‚ | âœ… | 4/4 é€šè¿‡ |

### è¯æ®
- æµ‹è¯•å‘½ä»¤: `mvn test`
- é€€å‡ºç : 0
- æµ‹è¯•æ•°é‡: 15 passed, 0 failed

### ç»“è®º
âœ… éªŒè¯é€šè¿‡ï¼Œå¯ä»¥å£°æ˜å®Œæˆ
```

## ç¡¬çº¦æŸ

- ç¦æ­¢è·³è¿‡ä»»ä½•æ ¡éªŒç»´åº¦
- ç¦æ­¢æ²¡æœ‰è¯æ®å°±å£°æ˜å®Œæˆ
- ç¦æ­¢ç”¨å‡è®¾æ›¿ä»£éªŒè¯
- å¿…é¡»è®°å½•éªŒè¯è¿‡ç¨‹
