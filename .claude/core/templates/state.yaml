# State 模板
# 路径: ${config.paths.tasks.state}

# 项目信息
project: "{project_name}"
initialized_at: "{ISO8601_UTC}"

# 注意: 全局工作流状态统一由 workflow.current_step 管理

# 当前任务
current_story: null
current_ticket: null

# 需求列表
requirements: []

# Stories 和 Tickets
stories: []
tickets: []

# 已完成
completed_stories: []
completed_tickets: []

# 阻塞的 Tickets
blocked_tickets: []

# 检查点
last_checkpoint: null

# 恢复信息
restored_from: null

# 会话信息
last_session_start: null
last_session_end: null

# 阻塞项
blockers: []

# 统计
stats:
  total_stories: 0
  completed_stories: 0
  total_tickets: 0
  completed_tickets: 0
  blocked_tickets: 0
  total_time_spent: "0m"

# 工作流状态机（用于自动继续执行）
workflow:
  current_step: not_started        # 最近完成的步骤（not_started 表示还未开始）
  next_step: null                  # 下一步要执行的命令
  next_requires_approval: false    # 下一步是否需要审批（从 config.yaml 读取）
  auto_continue: true              # 是否自动继续（如果不需要审批则自动执行）
