---
name: brainstorming
description: "Use when user triggers /brainstorm - performs requirement analysis with automatic multi-round validation"
metadata:
  invoked-by: "user"
  auto-execute: "true"
---

# Brainstorming Skill

## æ¦‚è§ˆ

éœ€æ±‚å¤´è„‘é£æš´ä¸åˆ†æï¼Œè‡ªåŠ¨è¿­ä»£æ­£å‘/åå‘æ ¡éªŒï¼Œç›´åˆ°è¾“å‡ºå®Œç¾éœ€æ±‚æ–‡æ¡£ã€‚

## ä½•æ—¶ä½¿ç”¨

- ç”¨æˆ·æ‰§è¡Œ `/brainstorm {æ¨¡å—å}`
- éœ€è¦è¿›è¡Œéœ€æ±‚åˆ†æå’Œç»†åŒ–
- äº§å‡º IEEE 830 å…¼å®¹çš„éœ€æ±‚è§„æ ¼

## âš ï¸ æ‰§è¡Œæ¨¡å¼ - è‡ªåŠ¨è¿­ä»£

```
âš ï¸ é“å¾‹ï¼š
1. ä¸ç­‰å¾…ç”¨æˆ·ç¡®è®¤ - è‡ªåŠ¨ç»§ç»­æ‰§è¡Œ
2. å¿…é¡»å¾ªç¯è¿­ä»£ - ç›´åˆ°æ‰€æœ‰æ£€æŸ¥é¡¹éƒ½æ˜¯ âœ…
3. æœ‰ä»»ä½•é—®é¢˜å°±è¡¥å……ï¼Œç„¶åé‡æ–°æ ¡éªŒ
```

## æ‰§è¡Œæµç¨‹

```
å¼€å§‹
  â”‚
  â–¼
[æ”¶é›†è¾“å…¥]
  â”‚ - ç”¨æˆ·éœ€æ±‚æè¿°
  â”‚ - ç›¸å…³è§„æ ¼æ–‡æ¡£ï¼ˆ${config.paths.docs.spec}ï¼‰
  â”‚ - PRD æºæ–‡ä»¶ï¼ˆ${config.paths.docs.source}ï¼Œå¦‚å·²é…ç½®ï¼‰
  â”‚ - UI åŸå‹æ–‡ä»¶ï¼ˆ${config.paths.docs.prototypes}ï¼Œå¦‚å·²é…ç½®ï¼‰
  â”‚ - å·²æœ‰ä»£ç å‚è€ƒ
  â”‚
  â–¼
[ç”Ÿæˆåˆç¨¿] â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                              â”‚
  â–¼                              â”‚
[æ­£å‘æ ¡éªŒ] â”€â”€â”€â”€ æœ‰é—®é¢˜ï¼Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ âœ… å…¨éƒ¨é€šè¿‡                  â”‚ è¡¥å……éœ€æ±‚
  â–¼                              â”‚
[åå‘æ ¡éªŒ] â”€â”€â”€â”€ æœ‰é—®é¢˜ï¼Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚ âœ… å…¨éƒ¨é€šè¿‡
  â”‚
  â–¼
[è¾“å‡ºç»“æœ]
```

## æ­£å‘æ ¡éªŒé¡¹ï¼ˆ5 é¡¹ï¼‰

| æ£€æŸ¥é¡¹ | æ£€æŸ¥é—®é¢˜ | é€šè¿‡æ¡ä»¶ | ä¸é€šè¿‡æ¡ä»¶ |
|--------|----------|----------|------------|
| ç»†èŠ‚å±‚çº§ | æ¯ä¸ªåŠŸèƒ½ç‚¹æ˜¯å¦æœ‰è¾“å…¥/è¾“å‡º/çº¦æŸï¼Ÿ | å…¨éƒ¨æœ‰ | ä»»ä¸€ç¼ºå¤± |
| æœ€å°è·¯å¾„ | èƒ½å¦æ‰¾åˆ°é—æ¼çš„æ­¥éª¤ï¼Ÿ | ä¸èƒ½ | èƒ½æ‰¾åˆ° |
| å½±å“åˆ†æ | æ˜¯å¦åˆ†æäº†å¯¹å…¶ä»–æ¨¡å—çš„å½±å“ï¼Ÿ | æ˜¯ | å¦ |
| é”™è¯¯å¤„ç† | æ¯ä¸ªæ“ä½œçš„å¼‚å¸¸æƒ…å†µæ˜¯å¦å®šä¹‰ï¼Ÿ | æ˜¯ | å¦ |
| æ ‡å‡†åˆè§„ | æ˜¯å¦ç¬¦åˆ IEEE 830 è¦ç´ ï¼Ÿ | æ˜¯ | å¦ |

## åå‘æ ¡éªŒé¡¹ï¼ˆ6 é¡¹ï¼‰

| æ£€æŸ¥é¡¹ | æ£€æŸ¥é—®é¢˜ | é€šè¿‡æ¡ä»¶ | ä¸é€šè¿‡æ¡ä»¶ |
|--------|----------|----------|------------|
| ç”¨æˆ·è§†è§’ | ç”¨æˆ·èƒ½å®Œæˆç›®æ ‡å—ï¼Ÿ | èƒ½ | ä¸èƒ½ |
| æµ‹è¯•è§†è§’ | èƒ½å†™å‡ºéªŒæ”¶æµ‹è¯•å—ï¼Ÿ | èƒ½ | ä¸èƒ½ |
| åœºæ™¯è¦†ç›– | æ­£å¸¸/å¼‚å¸¸/è¾¹ç•Œéƒ½è¦†ç›–äº†å—ï¼Ÿ | æ˜¯ | å¦ |
| ä»£ç å¿…è¦ | éœ€æ±‚éƒ½éœ€è¦å¼€å‘å—ï¼Ÿ | æ˜¯ | æœ‰å†—ä½™ |
| é‡å¤æ£€æŸ¥ | æœ‰é‡å¤çš„éœ€æ±‚å—ï¼Ÿ | æ²¡æœ‰ | æœ‰ |
| å¯å¤ç”¨æ€§ | æœ‰å¯å¤ç”¨çš„æ¨¡å—å—ï¼Ÿ | å·²æ ‡æ³¨ | æœªè€ƒè™‘ |

## UI æ¨¡å—ä¸“é¡¹æ ¡éªŒï¼ˆå½“æ¨¡å—æ¶‰åŠ UI è¿˜åŸæ—¶ï¼‰

å½“ `config.paths.docs.prototypes` å·²é…ç½®ï¼Œä¸” `/brainstorm` çš„æ¨¡å—ååŒ¹é…åˆ°è¯¥ç›®å½•ä¸‹çš„åŸå‹æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨è¿½åŠ ä»¥ä¸‹æ ¡éªŒé¡¹ï¼š

| æ£€æŸ¥é¡¹ | æ£€æŸ¥é—®é¢˜ | é€šè¿‡æ¡ä»¶ | ä¸é€šè¿‡æ¡ä»¶ |
|--------|----------|----------|------------|
| åŸå‹è¦†ç›– | åŸå‹ä¸­çš„æ‰€æœ‰é¡µé¢æ˜¯å¦éƒ½æœ‰å¯¹åº”éœ€æ±‚ï¼Ÿ | æ˜¯ | æœ‰é—æ¼é¡µé¢ |
| ç»„ä»¶æ¸…å• | æ˜¯å¦åˆ—å‡ºäº†æ‰€æœ‰éœ€è¦å®ç°çš„ UI ç»„ä»¶ï¼Ÿ | æ˜¯ | æœ‰é—æ¼ç»„ä»¶ |
| è®¾è®¡ Token | æ˜¯å¦å®šä¹‰äº†é¢œè‰²ã€åœ†è§’ã€é—´è·ç­‰è®¾è®¡å˜é‡ï¼Ÿ | æ˜¯ï¼ˆå¼•ç”¨ Agent å®šä¹‰çš„ Tokenï¼‰ | å¦ |
| äº¤äº’è¡Œä¸º | åŸå‹ä¸­çš„ JS äº¤äº’æ˜¯å¦éƒ½æœ‰å¯¹åº”æè¿°ï¼Ÿ | æ˜¯ | æœ‰é—æ¼äº¤äº’ |
| æ•°æ®ç»“æ„ | è¡¨æ ¼åˆ—ã€è¡¨å•å­—æ®µæ˜¯å¦ä¸ PRD æ•°æ®å­—å…¸ä¸€è‡´ï¼Ÿ | æ˜¯ | æœ‰å†²çª |

### è¾“å…¥æ¥æºåŒ¹é…è§„åˆ™

åŸå‹å’Œ PRD çš„æŸ¥æ‰¾åŸºäº `config.paths.docs` é…ç½®ï¼ŒæŒ‰æ¨¡å—åè‡ªåŠ¨åŒ¹é…ï¼š

1. **åŸå‹æ–‡ä»¶**ï¼šåœ¨ `${config.paths.docs.prototypes}` ä¸‹æŸ¥æ‰¾ä¸æ¨¡å—ååŒåæˆ–ç›¸å…³çš„å­ç›®å½•/æ–‡ä»¶
2. **PRD æ–‡æ¡£**ï¼šåœ¨ `${config.paths.docs.source}` ä¸‹æŸ¥æ‰¾æ–‡ä»¶ååŒ…å«æ¨¡å—å…³é”®è¯çš„ `.md` / `.docx` æ–‡ä»¶
3. **è§„æ ¼æ–‡æ¡£**ï¼šåœ¨ `${config.paths.docs.spec}` ä¸‹æŸ¥æ‰¾ç›¸å…³å­ç›®å½•

> å…·ä½“çš„æ¨¡å—ååˆ°æ–‡ä»¶è·¯å¾„çš„æ˜ å°„å…³ç³»ç”±å„é¡¹ç›®åœ¨ `config.yaml` ä¸­é…ç½®ã€‚å¦‚æœªé…ç½®æ˜ å°„ï¼Œåˆ™æŒ‰æ¨¡å—åæ¨¡ç³ŠåŒ¹é…æ–‡ä»¶åã€‚

## æ ¡éªŒç»´åº¦çŸ©é˜µ

| ç»´åº¦ | æ£€æŸ¥å†…å®¹ | æ–¹æ³• |
|------|----------|------|
| ç»“æ„å±‚ | ç¼–å·è¿ç»­ã€å¯¼èˆªå®Œæ•´ | é€ä¸ªè®¡æ•° |
| æ ¼å¼å±‚ | IDæ ¼å¼ã€æ—¶é—´æ ¼å¼ã€è·¯å¾„æ ¼å¼ | æ­£åˆ™éªŒè¯ |
| è¯­ä¹‰å±‚ | æŠ€æœ¯ç‰ˆæœ¬ã€é…ç½®å€¼ã€ä¸šåŠ¡æœ¯è¯­ | ä¸ config.yaml æ ¸å¯¹ |
| é€»è¾‘å±‚ | æµç¨‹å®Œæ•´ã€ä¾èµ–æ­£ç¡®ã€è¾¹ç•Œå¤„ç† | èµ°è¯»éªŒè¯ |

## æ‰§è¡Œä¼ªä»£ç 

```python
def brainstorming(user_input):
    # Step 1: æ”¶é›†è¾“å…¥
    config = load_yaml(".claude/project/config.yaml")
    
    context = {
        "user_request": user_input,
        "spec_docs": read_dir(config.paths.docs.spec),
        "source_docs": read_matching_docs(config.paths.docs.source, user_input) if config.paths.docs.get("source") else [],
        "prototypes": read_matching_files(config.paths.docs.prototypes, user_input) if config.paths.docs.get("prototypes") else [],
        "existing_code": search_related_code()
    }
    
    # Step 2: ç”Ÿæˆåˆç¨¿
    requirement_doc = generate_requirement(context)
    
    # Step 3: å¾ªç¯æ ¡éªŒ
    max_iterations = 10
    iteration = 0

    while iteration < max_iterations:
        iteration += 1
        print(f"ğŸ”„ æ ¡éªŒè¿­ä»£ {iteration}/{max_iterations}")

        # æ­£å‘æ ¡éªŒ
        forward_issues = []
        for check in FORWARD_CHECKS:
            result = check.execute(requirement_doc)
            if not result.passed:
                forward_issues.append(result.issue)

        if forward_issues:
            print(f"  æ­£å‘æ ¡éªŒ: âŒ {len(forward_issues)} ä¸ªé—®é¢˜")
            requirement_doc = enhance_doc(requirement_doc, forward_issues)
            continue  # é‡æ–°æ ¡éªŒ

        print("  æ­£å‘æ ¡éªŒ: âœ… 5/5 é€šè¿‡")

        # åå‘æ ¡éªŒ
        backward_issues = []
        for check in BACKWARD_CHECKS:
            result = check.execute(requirement_doc)
            if not result.passed:
                backward_issues.append(result.issue)

        if backward_issues:
            print(f"  åå‘æ ¡éªŒ: âŒ {len(backward_issues)} ä¸ªé—®é¢˜")
            requirement_doc = enhance_doc(requirement_doc, backward_issues)
            continue  # é‡æ–°æ­£å‘æ ¡éªŒ

        print("  åå‘æ ¡éªŒ: âœ… 6/6 é€šè¿‡")

        # å…¨éƒ¨é€šè¿‡
        break
    else:
        # è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ä»æœªé€šè¿‡æ ¡éªŒ â€” å¼ºåˆ¶å¤±è´¥é€€å‡º
        remaining_issues = forward_issues + backward_issues
        output_failure_report(iteration, remaining_issues)
        # ä¸æ›´æ–° workflow â€” ä¿æŒå½“å‰æ­¥éª¤ï¼Œä¾¿äºäººå·¥ä»‹å…¥
        raise BrainstormFailure(
            f"ç»è¿‡ {max_iterations} è½®è¿­ä»£ä»æœ‰ {len(remaining_issues)} é¡¹æ ¡éªŒæœªé€šè¿‡ï¼Œ"
            "è¯·äººå·¥æ£€æŸ¥éœ€æ±‚æ–‡æ¡£æˆ–è¡¥å……è¾“å…¥ä¿¡æ¯åé‡æ–°æ‰§è¡Œ /brainstorm"
        )

    # Step 4: è¾“å‡ºç»“æœï¼ˆä»…åœ¨å…¨éƒ¨æ ¡éªŒé€šè¿‡åæ‰æ‰§è¡Œï¼‰
    # æ›´æ–° workflow çŠ¶æ€
    state = read_yaml("osg-spec-docs/tasks/STATE.yaml")
    state.workflow.current_step = "brainstorm_done"
    state.workflow.next_step = "split_story"
    write_yaml("osg-spec-docs/tasks/STATE.yaml", state)

    return format_output(requirement_doc)
```

## å¤±è´¥é€€å‡ºè§„åˆ™

```
âš ï¸ å½“ max_iterationsï¼ˆé»˜è®¤ 10ï¼‰æ¬¡è¿­ä»£åä»æœ‰æ ¡éªŒé¡¹æœªé€šè¿‡ï¼š
1. è¾“å‡ºå¤±è´¥æŠ¥å‘Šï¼ˆåˆ—å‡ºæ‰€æœ‰æœªé€šè¿‡çš„æ ¡éªŒé¡¹å’Œå…·ä½“é—®é¢˜ï¼‰
2. ä¸æ›´æ–° workflow.current_step â€” ä¿æŒåœ¨æ‰§è¡Œå‰çš„çŠ¶æ€
3. åœæ­¢è‡ªåŠ¨ç»§ç»­ â€” æç¤ºç”¨æˆ·äººå·¥ä»‹å…¥
4. ç”¨æˆ·å¯ä»¥è¡¥å……ä¿¡æ¯åé‡æ–°æ‰§è¡Œ /brainstorm
```

## è¾“å‡ºæ ¼å¼

```markdown
## ğŸ“‹ éœ€æ±‚åˆ†æç»“æœ

### æ ¡éªŒè½®æ¬¡
- æ€»è½®æ¬¡: {iteration}
- æ­£å‘æ ¡éªŒ: âœ… å…¨éƒ¨é€šè¿‡
- åå‘æ ¡éªŒ: âœ… å…¨éƒ¨é€šè¿‡

### éœ€æ±‚è§„æ ¼

#### 1. æ¦‚è¿°
{åŠŸèƒ½æ¦‚è¿°}

#### 2. åŠŸèƒ½éœ€æ±‚
| ID | éœ€æ±‚æè¿° | ä¼˜å…ˆçº§ | éªŒæ”¶æ ‡å‡† |
|----|----------|--------|----------|
| REQ-001 | ... | P0 | ... |

#### 3. éåŠŸèƒ½éœ€æ±‚
...

#### 4. æ¥å£å®šä¹‰
...

### â­ï¸ ä¸‹ä¸€æ­¥
æ‰§è¡Œ `/split story` å°†éœ€æ±‚æ‹†è§£ä¸º Stories
```

## ç¡¬çº¦æŸ

- ç¦æ­¢è·³è¿‡ä»»ä½•æ ¡éªŒé¡¹
- ç¦æ­¢åœ¨æ ¡éªŒæœªå…¨éƒ¨é€šè¿‡æ—¶è¾“å‡º
- ç¦æ­¢åœä¸‹æ¥ç­‰å¾…ç”¨æˆ·ç¡®è®¤
- å¿…é¡»å¾ªç¯ç›´åˆ°å…¨éƒ¨ âœ…
- **ç¦æ­¢è¶…è¿‡ max_iterationsï¼ˆ10 æ¬¡ï¼‰è¿­ä»£** - è¾¾åˆ°ä¸Šé™å¿…é¡»å¤±è´¥é€€å‡º
- **æ¯æ¬¡è¿­ä»£å¿…é¡»è¾“å‡ºè¿›åº¦** - æ ¼å¼ï¼š`ğŸ”„ æ ¡éªŒè¿­ä»£ N/10`

---

## ğŸš¨ è¿­ä»£è®¡æ•°å¼ºåˆ¶è§„åˆ™

**æ¯æ¬¡æ ¡éªŒå¾ªç¯å¼€å§‹æ—¶ï¼Œå¿…é¡»è¾“å‡ºè¿­ä»£è¿›åº¦ï¼š**

```
ğŸ”„ æ ¡éªŒè¿­ä»£ 1/10
  - æ­£å‘æ ¡éªŒ: æ£€æŸ¥ä¸­...
  - åå‘æ ¡éªŒ: æ£€æŸ¥ä¸­...

ğŸ”„ æ ¡éªŒè¿­ä»£ 2/10 (ä¸Šè½®å‘ç° 2 ä¸ªé—®é¢˜ï¼Œå·²è¡¥å……)
  - æ­£å‘æ ¡éªŒ: âœ… 5/5 é€šè¿‡
  - åå‘æ ¡éªŒ: æ£€æŸ¥ä¸­...
```
